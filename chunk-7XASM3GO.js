import{$ as N,C as s,I as U,J as _,K as b,L as V,N as P,O as v,P as j,Q as E,R as S,T as i,U as a,V as M,W as w,X as G,Y as L,Z as k,_ as O,aa as d,ba as u,ca as R,e as f,f as C,h,ia as B,j as z,ja as H,la as g,m as A,ma as l,n as x,o as y,ra as q,s as F,sa as m,ua as Y,va as J,x as $,y as c}from"./chunk-UHRQ7P4Y.js";var K=class r{http=A(J);apiUrl="http://localhost:3333/api";loadingSignal=F(!1);errorSignal=F(null);loading=this.loadingSignal.asReadonly();error=this.errorSignal.asReadonly();getProducts(e,t=1,o=12){this.loadingSignal.set(!0),this.errorSignal.set(null);let n=new Y().set("page",t.toString()).set("pageSize",o.toString());return e&&(e.category&&(n=n.set("category",e.category)),e.minPrice!==void 0&&(n=n.set("minPrice",e.minPrice.toString())),e.maxPrice!==void 0&&(n=n.set("maxPrice",e.maxPrice.toString())),e.inStock!==void 0&&(n=n.set("inStock",e.inStock.toString())),e.searchTerm&&(n=n.set("searchTerm",e.searchTerm))),this.http.get(`${this.apiUrl}/products`,{params:n}).pipe(C(p=>{if(this.loadingSignal.set(!1),!p.success)throw new Error(p.error||"Failed to load products");return p.data}),h(p=>(this.loadingSignal.set(!1),this.errorSignal.set(p.message||"An error occurred while loading products"),console.error("Error loading products:",p),f({items:[],total:0,page:1,pageSize:12,totalPages:0}))))}getProductById(e){return this.loadingSignal.set(!0),this.errorSignal.set(null),this.http.get(`${this.apiUrl}/products/${e}`).pipe(C(t=>{if(this.loadingSignal.set(!1),!t.success)throw new Error(t.error||"Failed to load product");return t.data}),h(t=>(this.loadingSignal.set(!1),this.errorSignal.set(t.message||"An error occurred while loading the product"),console.error("Error loading product:",t),f(null))))}getCategories(){return this.http.get(`${this.apiUrl}/products-metadata/categories`).pipe(C(e=>{if(!e.success)throw new Error(e.error||"Failed to load categories");return e.data}),h(e=>(console.error("Error loading categories:",e),f([]))))}getPriceRange(){return this.http.get(`${this.apiUrl}/products-metadata/price-range`).pipe(C(e=>{if(!e.success)throw new Error(e.error||"Failed to load price range");return e.data}),h(e=>(console.error("Error loading price range:",e),f({min:0,max:1e3}))))}static \u0275fac=function(t){return new(t||r)};static \u0275prov=z({token:r,factory:r.\u0275fac,providedIn:"root"})};function Z(r,e){r&1&&(i(0,"div",3),d(1,"Out of Stock"),a())}function ee(r,e){if(r&1&&(i(0,"span"),d(1,"\u2605"),a()),r&2){let t=e.$implicit;N("filled",t)}}var T=class r{product=l.required();productClick=g();getStars(){let e=this.product().rating,t=Math.floor(e),o=e%1>=.5;return Array(5).fill(!1).map((n,p)=>!!(p<t||p===t&&o))}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=s({type:r,selectors:[["shop-product-card"]],inputs:{product:[1,"product"]},outputs:{productClick:"productClick"},decls:18,vars:12,consts:[["tabindex","0","role","button",1,"product-card",3,"click","keyup.enter","keyup.space"],[1,"product-image"],[3,"src","alt"],[1,"out-of-stock-overlay"],[1,"product-info"],[1,"product-name"],[1,"product-category"],[1,"product-rating"],[1,"stars"],[3,"filled"],[1,"review-count"],[1,"product-price"]],template:function(t,o){t&1&&(i(0,"div",0),k("click",function(){return o.productClick.emit(o.product())})("keyup.enter",function(){return o.productClick.emit(o.product())})("keyup.space",function(){return o.productClick.emit(o.product())}),i(1,"div",1),M(2,"img",2),_(3,Z,2,0,"div",3),a(),i(4,"div",4)(5,"h3",5),d(6),a(),i(7,"p",6),d(8),a(),i(9,"div",7)(10,"span",8),P(11,ee,2,2,"span",9,V),a(),i(13,"span",10),d(14),a()(),i(15,"div",11),d(16),B(17,"currency"),a()()()),t&2&&(N("out-of-stock",!o.product().inStock),U("aria-label","View details for "+o.product().name),c(2),G("src",o.product().imageUrl,$)("alt",o.product().name),c(),b(o.product().inStock?-1:3),c(3),u(o.product().name),c(2),u(o.product().category),c(3),v(o.getStars()),c(3),R("(",o.product().reviewCount,")"),c(2),R(" ",H(17,10,o.product().price)," "))},dependencies:[m,q],styles:[".product-card[_ngcontent-%COMP%]{border:1px solid #e0e0e0;border-radius:8px;overflow:hidden;cursor:pointer;transition:all .3s ease;background:#fff;height:100%;display:flex;flex-direction:column}.product-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 4px 12px #0000001a}.product-card.out-of-stock[_ngcontent-%COMP%]{opacity:.7}.product-image[_ngcontent-%COMP%]{position:relative;width:100%;padding-top:100%;overflow:hidden;background:#f5f5f5}.product-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover}.out-of-stock-overlay[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);background:#000000b3;color:#fff;padding:8px 16px;border-radius:4px;font-weight:700}.product-info[_ngcontent-%COMP%]{padding:16px;flex:1;display:flex;flex-direction:column}.product-name[_ngcontent-%COMP%]{margin:0 0 8px;font-size:1.1rem;font-weight:600;color:#333;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical}.product-category[_ngcontent-%COMP%]{margin:0 0 8px;font-size:.9rem;color:#666}.product-rating[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-bottom:12px}.stars[_ngcontent-%COMP%]{color:#ddd}.stars[_ngcontent-%COMP%]   .filled[_ngcontent-%COMP%]{color:gold}.review-count[_ngcontent-%COMP%]{font-size:.85rem;color:#666}.product-price[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:700;color:#2c3e50;margin-top:auto}"],changeDetection:0})};var te=(r,e)=>e.id;function oe(r,e){if(r&1){let t=w();E(0,"shop-product-card",3),L("productClick",function(n){x(t);let p=O();return y(p.productSelect.emit(n))}),S()}if(r&2){let t=e.$implicit;j("product",t)}}function re(r,e){r&1&&(E(0,"div",2)(1,"p"),d(2,"No products found"),S()())}var Q=class r{products=l.required();productSelect=g();static \u0275fac=function(t){return new(t||r)};static \u0275cmp=s({type:r,selectors:[["shop-product-grid"]],inputs:{products:[1,"products"]},outputs:{productSelect:"productSelect"},decls:4,vars:1,consts:[[1,"product-grid"],[3,"product"],[1,"no-products"],[3,"productClick","product"]],template:function(t,o){t&1&&(E(0,"div",0),P(1,oe,1,1,"shop-product-card",1,te,!1,re,3,0,"div",2),S()),t&2&&(c(),v(o.products()))},dependencies:[m,T],styles:[".product-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(250px,1fr));gap:24px;padding:24px 0}.no-products[_ngcontent-%COMP%]{grid-column:1 / -1;text-align:center;padding:48px;color:#666;font-size:1.1rem}@media(max-width:768px){.product-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(150px,1fr));gap:16px}}"],changeDetection:0})};var W=class r{static \u0275fac=function(t){return new(t||r)};static \u0275cmp=s({type:r,selectors:[["shop-loading-spinner"]],decls:4,vars:0,consts:[[1,"spinner-container"],[1,"spinner"]],template:function(t,o){t&1&&(i(0,"div",0),M(1,"div",1),i(2,"p"),d(3,"Loading..."),a()())},dependencies:[m],styles:[".spinner-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:48px}.spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid #f3f3f3;border-top:4px solid #3498db;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}p[_ngcontent-%COMP%]{margin-top:16px;color:#666;font-size:1rem}"],changeDetection:0})};function ne(r,e){if(r&1){let t=w();i(0,"button",3),k("click",function(){x(t);let n=O();return y(n.retry.emit())}),d(1," Try Again "),a()}}var X=class r{title=l();message=l();showRetry=l(!0);retry=g();static \u0275fac=function(t){return new(t||r)};static \u0275cmp=s({type:r,selectors:[["shop-error-message"]],inputs:{title:[1,"title"],message:[1,"message"],showRetry:[1,"showRetry"]},outputs:{retry:"retry"},decls:8,vars:3,consts:[[1,"error-container"],[1,"error-icon"],[1,"retry-button"],[1,"retry-button",3,"click"]],template:function(t,o){t&1&&(i(0,"div",0)(1,"div",1),d(2,"\u26A0\uFE0F"),a(),i(3,"h3"),d(4),a(),i(5,"p"),d(6),a(),_(7,ne,2,0,"button",2),a()),t&2&&(c(4),u(o.title()||"Oops! Something went wrong"),c(2),u(o.message()||"An unexpected error occurred. Please try again later."),c(),b(o.showRetry()?7:-1))},dependencies:[m],styles:[".error-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:48px;text-align:center;background:#fff;border-radius:8px;border:1px solid #e0e0e0}.error-icon[_ngcontent-%COMP%]{font-size:48px;margin-bottom:16px}h3[_ngcontent-%COMP%]{margin:0 0 8px;font-size:1.5rem;color:#333}p[_ngcontent-%COMP%]{margin:0 0 24px;color:#666;font-size:1rem;max-width:400px}.retry-button[_ngcontent-%COMP%]{background:#3498db;color:#fff;border:none;padding:12px 24px;border-radius:4px;font-size:1rem;cursor:pointer;transition:background .3s ease}.retry-button[_ngcontent-%COMP%]:hover{background:#2980b9}"],changeDetection:0})};export{K as a,Q as b,W as c,X as d};
